<!DOCTYPE html>
<html>
<head>
<title>가변 계산기</title>
<style type="text/css">
	.col-width{ width:100px; }
	.col-height{ width:100px; }
	.col-float-left div{ float: left; }
	.col-float-left::after{
		content: '';
		display: block;
		clear: both;
	} 
	.color-yellow { color: yellow;	}
	.color-red { color: red; }
	.color-blue { color: blue; }
	.col-mg-5 {		margin: 5px;	}
	.col-mg-10 {		margin: 10px;	}
	.col-mg-20 {		margin: 20px;	}
</style>
</head>
<body>
	<header>
		<h1>계산기 과제 - 변형(가로 가변 계산기)</h1>
	</header>
	<section>
		<div class="col-float-left">
			<div>가로길이 : <input id="width-col" type="number" placeholder="계산기의 가로길이를 입력(최대 9)" value="4"></div>
			<!--<div>최대숫자 : <input id="max-num" type="number" placeholder="계산기의 최대숫자 입력" value="9"></div>-->
			<div><button onclick="fnDrawCalc()" type="button">적용</button></div>
		</div>
		<div> 
			<p>계산로그</p>
			<p id="cac-log"></p>
		</div>
		<div>계산식 : <input id="calc-formula" type="text"> <button onclick="fnCalc()" type="button">계산</button></div>
		<div id="calc-main">
		</div>
	</section>
</body>
</html>
<!-- javascript 시작 -->
<script>
	/** 
	 * @
	 */
	var frameOfBtn ;
	var DEFAULT_BTN_WIDTH = "25px";
	var DEFAULT_BTN_HEIGHT = "25px";

	var createButtonElement = function (btnMetaArr, cols, targetEle) {
		if (!targetEle || !btnMetaArr || cols) {
			console.log("Can't create")
			return ;
		}
		targetEle.style.display="flex";
		btnMetaArr.forEach((item,idx,arr) => {
			var btn = document.createElement('button');
			btn.style.width = item.width || DEFAULT_BTN_WIDTH;
			btn.style.width = item.height || DEFAULT_BTN_HEIGHT;
			btn.innerText = item.nomalSymbol || "N/A";
			if(itme && item.type==='action'){
				
			}
			targetEle.appendChild(btn);
		});

	}


	window.addEventListener('load',function(event){
		var numberSymbols = [];
		var i = 1;
		while(i<=10) {
			var curNum = ( i % 10 ); // 0을 맨 뒤로 하기 위함 
			numberSymbols.push({
				nomalSymbol : "" + curNum,
				meaning : curNum,
				type:'operand',
			})
			i++
		}
		var btnMetaArr = [
		{
			nomalSymbol:'(',
			meaning:'left parentheses',
			type:'operand',
		},
		{
			nomalSymbol:')',
			meaning:'right parentheses',
			type:'operand',
		},
		{
			nomalSymbol:'Mod',
			meaning:'MOD',
			type : 'operator',
		},
		{
			nomalSymbol:'AC',
			meaning:'All Clear',
			type:'action',
		},
		{
			nomalSymbol:'C',
			meaning:'Clear',
			type:'action',
		},
		{
			nomalSymbol:'CE',
			meaning:'Clear Entry',
			type:'action',
		},
		{
			nomalSymbol:'÷',
			meaning:'/',
			type : 'operator',
			operatorAction : function (a, b){
				if(b===0)
					throw Error("tried to divide by ZERO.");
				return a / b;				
			},
		},
		{
			nomalSymbol:'×',
			meaning:'*',
			type : 'operator',
			operatorAction : function (a, b){				
				return a * b;				
			},
		},
		{
			nomalSymbol:'+',
			meaning:'+',
			type : 'operator',
			operatorAction : function (a, b){				
				return a + b;				
			},
		},
		{
			nomalSymbol:'-',
			meaning:'-',
			type : 'operator',
			operatorAction : function (a, b){				
				if(!a){
					return -b;
				}
				return a - b;				
			},
		},
		{
			nomalSymbol:'=',
			meaning:'=',
			type:'action',
		},
		{
			nomalSymbol:'.',
			meaning:'.',
			type:'operand',
		},
		];
		var DEFAULT_NUM_COLS = 4;
		createButtonElement(btnMetaArr.concat(numberSymbols),DEFAULT_NUM_COLS);
	});
</script>